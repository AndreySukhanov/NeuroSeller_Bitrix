# –ù–µ–π—Ä–æ–ø—Ä–æ–¥–∞–≤–µ—Ü –ë–∏—Ç—Ä–∏–∫—Å

AI-powered –ø—Ä–æ–¥–∞–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ CRM —Å–∏—Å—Ç–µ–º—ã (Bitrix24, AMO CRM).

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GPT –¥–ª—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ CRM –∫–∞–Ω–∞–ª—ã
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ª–∏–¥–æ–≤  
- –°–æ–∑–¥–∞–Ω–∏—è –≤—Å—Ç—Ä–µ—á –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Ä–æ–Ω–∫–æ–π –ø—Ä–æ–¥–∞–∂
- RAG (Retrieval-Augmented Generation) –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ "—Å–ø—è—â–∏—Ö" –ª–∏–¥–æ–≤

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **GPT-–±–æ—Ç** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º
- üìä **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∏–¥–æ–≤**: A/B/C + —Å—Ç–∞—Ç—É—Å—ã (–ù–æ–≤—ã–π, –ì–æ—Ä—è—á–∏–π, –¢—ë–ø–ª—ã–π, –•–æ–ª–æ–¥–Ω—ã–π, –ö—É–ø–∏–ª, –ù–µ –∫—É–ø–∏–ª)
- üìÖ **–£–º–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á** —á–µ—Ä–µ–∑ CRM
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –≤–æ—Ä–æ–Ω–∫–µ** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤
- üìö **RAG —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- ‚è∞ **"–ë—É–¥–∏–ª—å–Ω–∏–∫"** –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–∏–¥–æ–≤
- üéõÔ∏è **–í–∏–¥–∂–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –ø—Ä—è–º–æ –≤ CRM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Django 5.2, PostgreSQL, Redis
- **AI**: OpenAI GPT-4, FAISS –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–û—á–µ—Ä–µ–¥–∏**: Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **CRM**: Bitrix24 REST API, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è AMO CRM
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker Compose

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <repository-url>
cd –Ω–µ–π—Ä–æ–ø—Ä–æ–¥–∞–≤–µ—Ü_–±–∏—Ç—Ä–∏–∫—Å/sellmind
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã

```bash
python -m venv myvenv
# Windows:
myvenv\Scripts\activate
# Linux/macOS:
source myvenv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
cp .env.example .env
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `SECRET_KEY` - Django —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- `OPENAI_API_KEY` - API –∫–ª—é—á OpenAI
- `POSTGRES_*` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 5. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
docker-compose up -d  # PostgreSQL + Redis
```

### 6. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫

```bash
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

### 7. –ó–∞–ø—É—Å–∫ Celery (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)

```bash
celery -A conf worker -l info
celery -A conf beat -l info  # –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CRM

### Bitrix24

1. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ –≤ Bitrix24
2. –í –∞–¥–º–∏–Ω–∫–µ Django –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é —Å:
   - `auth_domain` - –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ Bitrix24 (–Ω–∞–ø—Ä–∏–º–µ—Ä: `company.bitrix24.ru`)
   - `webhook` - URL –≤–µ–±—Ö—É–∫–∞ Bitrix24

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Bitrix24:
   - URL —É—Å—Ç–∞–Ω–æ–≤–∫–∏: `https://yourdomain.com/chat/bitrix/install/`
   - URL –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞: `https://yourdomain.com/webhook/`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
sellmind/
‚îú‚îÄ‚îÄ chat/          # –ú–æ–¥—É–ª—å —á–∞—Ç–∞ –∏ GPT
‚îú‚îÄ‚îÄ crm/           # CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ users/         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏
‚îú‚îÄ‚îÄ conf/          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îú‚îÄ‚îÄ utils/         # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ templates/     # HTML —à–∞–±–ª–æ–Ω—ã
```

## API Endpoints

- `POST /webhook/` - –û—Å–Ω–æ–≤–Ω–æ–π webhook –¥–ª—è CRM —Å–æ–±—ã—Ç–∏–π
- `POST /chat/webhook/disable-gpt/` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ GPT
- `POST /chat/webhook/enable-gpt/` - –í–∫–ª—é—á–µ–Ω–∏–µ GPT
- `GET /company/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–µ–π

- **Company** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- **User** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ CRM
- **Lead** - –õ–∏–¥—ã —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- **Chat/Message** - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏
- **Func/Property** - –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è GPT

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π CRM

1. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ –æ—Ç `crm.services.crm_abs.CRM`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—Å–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `crm.services.request_data_handler.get_crm()`

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ä–µ–¥–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```python
# .env –¥–ª—è production
DEBUG=False
SECRET_KEY=<secure-random-key>
ALLOWED_HOSTS=yourdomain.com
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```nginx
location / {
    proxy_pass http://127.0.0.1:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- `logs/app.log` - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Console output –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ –ü–û

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –≤ `logs/app.log`
2. –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `docker-compose ps`
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CRM –≤–µ–±—Ö—É–∫–æ–≤
4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env` 